<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Complete Chat Widget Configuration Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1000px;
      margin: 50px auto;
      padding: 20px;
      line-height: 1.6;
    }
    h1 {
      color: #333;
    }
    h2 {
      color: #0891b2;
      border-bottom: 2px solid #0891b2;
      padding-bottom: 5px;
    }
    p {
      color: #666;
    }
    .config-section {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      margin: 30px 0;
      border-left: 4px solid #0891b2;
    }
    .config-section h3 {
      margin-top: 0;
      color: #0891b2;
    }
    .config-section pre {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.4;
    }
    .alert {
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      border-radius: 4px;
      padding: 15px;
      margin: 20px 0;
    }
    .alert-success {
      background: #d4edda;
      border-color: #c3e6cb;
      color: #155724;
    }
    .alert-info {
      background: #d1ecf1;
      border-color: #bee5eb;
      color: #0c5460;
    }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .feature-card {
      background: #fff;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .feature-card h4 {
      margin-top: 0;
      color: #0891b2;
    }
    .code-comment {
      color: #6a9955;
      font-style: italic;
    }
    .required {
      color: #dc3545;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>üöÄ Complete Chat Widget Configuration Guide</h1>
  <p>This page demonstrates ALL possible configuration options for the chat widget. Click the chat button in the bottom right corner to test!</p>
  
  <div class="alert alert-success">
    ‚úÖ <strong>Live Example!</strong> This widget demonstrates all features with a working n8n webhook connection.
  </div>

  <h2>üéØ Current Live Configuration</h2>
  <div class="config-section">
    <h3>Active Configuration (All Options)</h3>
    <pre>window.ChatWidgetConfig = {
  <span class="code-comment">// === REQUIRED SETTINGS ===</span>
  webhookUrl: "https://n8n.aggarwal.ai/webhook/d3b0741a-2417-4bc8-853d-3d69b2667267/chat",
  
  <span class="code-comment">// === CORE UI SETTINGS ===</span>
  welcomeMessage: "Hello! Welcome to The Grout Medic chat.",
  subtitle: "I'm Sarah and I'm here to help you with your grout needs.",
  primaryColor: "#0891b2",
  
  <span class="code-comment">// === ACTION BUTTONS ===</span>
  actionButtons: [
    { text: "üÜì Free Estimate", action: "estimate" },
    { text: "‚ùì I have a question", action: "question" },
    { text: "üîß Other", action: "other" }
  ],
  
  <span class="code-comment">// === AGENT SETTINGS ===</span>
  agentName: "Sarah",
  agentAvatar: "https://explained-public.s3.us-east-1.amazonaws.com/sarah_small.png",
  showAgent: true,
  
  <span class="code-comment">// === COMPANY BRANDING ===</span>
  companyName: "The Grout Medic",
  companyTagline: "Chatting with Sarah",
  
  <span class="code-comment">// === LEGAL & COMPLIANCE ===</span>
  recordingDisclaimer: "This transcript will be recorded by The Grout Medic and its affiliates. By using this chat, you agree to our Terms of Use and Privacy Policy.",
  termsOfUseUrl: "https://thegroutmedic.com/terms",
  privacyPolicyUrl: "https://thegroutmedic.com/privacy",
  

  <span class="code-comment">// === SESSION MANAGEMENT ===</span>
  conversationTimeoutMinutes: 30,
  
  <span class="code-comment">// === N8N INTEGRATION ===</span>
  chatInputKey: "chatInput",
  chatSessionKey: "sessionId",
  
  <span class="code-comment">// === METADATA ===</span>
  metadata: {
    source: "groutguy.com",
    page: window.location.pathname,
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent
  },
  
  <span class="code-comment">// === CALLBACKS ===</span>
  onMessageSend: function(message, action) {
    console.log("üì§ Sending to n8n:", { message, action });
    <span class="code-comment">// Track analytics, send to Google Analytics, etc.</span>
  },
  
  onMessageReceive: function(response) {
    console.log("üì• Received from n8n:", response);
    <span class="code-comment">// Track response metrics</span>
  },
  
  onError: function(error) {
    console.error("‚ùå Chat Error:", error);
    <span class="code-comment">// Send error to monitoring service</span>
  }
};</pre>
  </div>

  <h2>üìã Complete Configuration Options</h2>
  
  <div class="feature-grid">
    <div class="feature-card">
      <h4>üîó Required Settings</h4>
      <ul>
        <li><strong>webhookUrl</strong> <span class="required">*</span> - Your n8n webhook URL</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <h4>üé® UI Customization</h4>
      <ul>
        <li><strong>welcomeMessage</strong> - Main welcome text</li>
        <li><strong>subtitle</strong> - Subtitle text</li>
        <li><strong>primaryColor</strong> - Brand color (hex)</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <h4>ü§ñ Agent Settings</h4>
      <ul>
        <li><strong>agentName</strong> - Agent's name</li>
        <li><strong>agentAvatar</strong> - Agent's avatar URL</li>
        <li><strong>showAgent</strong> - Show/hide agent avatar</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <h4>üè¢ Company Branding</h4>
      <ul>
        <li><strong>companyName</strong> - Company name</li>
        <li><strong>companyTagline</strong> - Company tagline</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <h4>‚öñÔ∏è Legal & Compliance</h4>
      <ul>
        <li><strong>recordingDisclaimer</strong> - Recording notice</li>
        <li><strong>termsOfUseUrl</strong> - Terms of Use link</li>
        <li><strong>privacyPolicyUrl</strong> - Privacy Policy link</li>
        <li><strong>poweredBy</strong> - Attribution text</li>
        <li><strong>poweredByUrl</strong> - Attribution link</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <h4>‚è∞ Session Management</h4>
      <ul>
        <li><strong>conversationTimeoutMinutes</strong> - Auto-clear timeout</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <h4>üîß n8n Integration</h4>
      <ul>
        <li><strong>chatInputKey</strong> - Input field name</li>
        <li><strong>chatSessionKey</strong> - Session ID field name</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <h4>üìä Callbacks & Analytics</h4>
      <ul>
        <li><strong>onMessageSend</strong> - Before sending</li>
        <li><strong>onMessageReceive</strong> - After receiving</li>
        <li><strong>onError</strong> - Error handling</li>
      </ul>
    </div>
  </div>

  <h2>üéõÔ∏è Action Buttons Configuration</h2>
  <div class="config-section">
    <h3>Action Button Options</h3>
    <pre>actionButtons: [
  { text: "üÜì Free Estimate", action: "estimate" },
  { text: "‚ùì I have a question", action: "question" },
  { text: "üìû Schedule Service", action: "schedule" },
  { text: "üí∞ Pricing", action: "pricing" },
  { text: "üìç Service Areas", action: "areas" },
  { text: "‚≠ê Reviews", action: "reviews" },
  { text: "üîß Other", action: "other" }
]</pre>
    <p><strong>Note:</strong> You can have 1-7 action buttons. Each button sends its <code>action</code> value to your n8n webhook.</p>
  </div>

  <h2>üì§ Data Sent to n8n Webhook</h2>
  <div class="config-section">
    <h3>Example Webhook Payload</h3>
    <pre>{
  "action": "estimate",
  "sessionId": "session_1704067200000_abc123def",
  "chatInput": "I need a free estimate for my bathroom",
  "source": "demo-website",
  "page": "/embed_example.html",
  "timestamp": "2024-01-01T12:00:00.000Z",
  "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)..."
}</pre>
  </div>

  <h2>üîß Advanced Features</h2>
  <div class="feature-grid">
    <div class="feature-card">
      <h4>üíæ Conversation Persistence</h4>
      <p>Messages are automatically saved to localStorage and restored on page reload. Conversations expire after the configured timeout period.</p>
    </div>
    
    <div class="feature-card">
      <h4>üì± Mobile Responsive</h4>
      <p>Fully responsive design that works perfectly on desktop, tablet, and mobile devices.</p>
    </div>
    
    <div class="feature-card">
      <h4>üé® Speech Bubbles</h4>
      <p>Professional chat bubbles with proper styling, avatars, and visual indicators.</p>
    </div>
    
    <div class="feature-card">
      <h4>‚å®Ô∏è Enhanced Input</h4>
      <p>Shift+Enter for new lines, auto-resizing textarea, and proper message formatting.</p>
    </div>
  </div>

  <h2>üöÄ Quick Start</h2>
  <div class="alert alert-info">
    <h4>Minimal Configuration</h4>
    <pre>window.ChatWidgetConfig = {
  webhookUrl: "YOUR_N8N_WEBHOOK_URL"
};</pre>
    <p>That's it! All other settings use sensible defaults.</p>
  </div>

  <!-- Configuration MUST come before the script -->
  <script>
    window.ChatWidgetConfig = {
      // === REQUIRED SETTINGS ===
      webhookUrl: "https://n8n.aggarwal.ai/webhook/d3b0741a-2417-4bc8-853d-3d69b2667267/chat",
      
      // === CORE UI SETTINGS ===
      welcomeMessage: "Hello! Welcome to The Grout Medic chat.",
      subtitle: "I'm Sarah and I'm here to help you with your grout needs.",
      primaryColor: "#0891b2",
      
      // === ACTION BUTTONS ===
      actionButtons: [
        { text: "üÜì Free Estimate", action: "estimate" },
        { text: "‚ùì I have a question", action: "question" },
        { text: "üîß Other", action: "other" }
      ],
      
      // === AGENT SETTINGS ===
      agentName: "Sarah",
      agentAvatar: "https://explained-public.s3.us-east-1.amazonaws.com/sarah_small.png",
      showAgent: true,
      
      // === COMPANY BRANDING ===
      companyName: "The Grout Medic",
      companyTagline: "Chatting with Sarah",
      
      // === LEGAL & COMPLIANCE ===
      recordingDisclaimer: "This transcript will be recorded by The Grout Medic and its affiliates.",
      
      
      // === SESSION MANAGEMENT ===
      conversationTimeoutMinutes: 5,
      
      // === N8N INTEGRATION ===
      chatInputKey: "chatInput",
      chatSessionKey: "sessionId",
      
      // === METADATA ===
      metadata: {
        source: "groutguy.com",
        page: window.location.pathname,
        timestamp: new Date().toISOString(),
        userAgent: navigator.userAgent
      },
      
      // === CALLBACKS ===
      onMessageSend: function(message, action) {
        console.log("Sending to n8n:", { message, action });
        // Track analytics, send to Google Analytics, etc.
      },
      
      onMessageReceive: function(response) {
        console.log("Received from n8n:", response);
        // Track response metrics
      },
      
      onError: function(error) {
        console.error("Chat Error:", error);
        // Send error to monitoring service
      }
    };
  </script>

  <!-- Widget Script - Using jsDelivr CDN -->
  <script src="./chat_widget.min.js"></script>
</body>
</html>